var n={INIT:"antetype.init",CLOSE:"antetype.close",DRAW:"antetype.draw",CALC:"antetype.calc",RECALC_FINISHED:"antetype.recalc.finished",MODULES:"antetype.modules",SETTINGS:"antetype.settings.definition",TYPE_DEFINITION:"antetype.layer.type.definition",FONTS_LOADED:"antetype.font.loaded",CANVAS_CHANGE:"antetype.canvas.change"},d=Symbol("original"),h=Symbol("clone");var p=Symbol("layer");var l="core",s="0.0.5",y=class{#e;#t=null;#r=!1;#a=null;static inject={marshal:"boardmeister/marshal",herald:"boardmeister/herald"};inject(e){this.#e=e}async loadModules(e){return(await this.#i()).loadModules(e)}register(e){let{registration:t}=e.detail;t[l]={load:async()=>(!this.#t&&!this.#r&&(this.#r=new Promise(r=>{this.#n("core.js").then(a=>{this.#t=a.default,this.#r=!1,r()})})),this.#r&&await this.#r,console.log("load module3",this.#t),r=>this.#t({modules:r,herald:this.#e.herald})),version:s}}static subscriptions={[n.MODULES]:"register"};#n(e){return import(this.#e.marshal.getResourceUrl(this,e))}async#i(){return this.#a??=(await this.#n("helper.js")).default,new this.#a(this.#e.herald)}};var o="workspace",c="0.0.4",i=class{#e=null;#t;static inject={marshal:"boardmeister/marshal",herald:"boardmeister/herald"};inject(t){this.#t=t}register(t){let{registration:r}=t.detail;r[o]={load:async()=>{if(!this.#e){let a=this.#t.marshal.getResourceUrl(this,"module.js");this.#e=(await import(a)).default}return a=>new this.#e(a,this.#t.herald)},version:c}}static subscriptions={[n.MODULES]:"register"}},u=i,w=u;export{i as AntetypeWorkspace,o as ID,c as VERSION,w as default};
