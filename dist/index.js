var n=(t=>(t.STRUCTURE="antetype.structure",t.DRAW="antetype.draw",t.MIDDLE="antetype.structure.middle",t.BAR_BOTTOM="antetype.structure.bar.bottom",t.CENTER="antetype.structure.center",t.COLUMN_LEFT="antetype.structure.column.left",t.COLUMN_RIGHT="antetype.structure.column.right",t.BAR_TOP="antetype.structure.bar.top",t.MODULES="antetype.modules",t))(n||{});var o=(t=>(t.STRUCTURE="antetype.structure",t.DRAW="antetype.draw",t.MIDDLE="antetype.structure.middle",t.BAR_BOTTOM="antetype.structure.bar.bottom",t.CENTER="antetype.structure.center",t.COLUMN_LEFT="antetype.structure.column.left",t.COLUMN_RIGHT="antetype.structure.column.right",t.BAR_TOP="antetype.structure.bar.top",t.MODULES="antetype.modules",t))(o||{}),d=Symbol("error"),m=Symbol("timeout"),p=Symbol("loading"),a=(t=>(t.CALC="antetype.illustrator.calc",t))(a||{}),y=class{#e=null;#t=null;#r;static inject={minstrel:"boardmeister/minstrel",herald:"boardmeister/herald"};inject(t){this.#r=t}async register(t){let{modules:e,canvas:r}=t.detail;if(!this.#e){let s=this.#r.minstrel.getResourceUrl(this,"module.js");this.#e=(await import(s)).default}this.#t=e.illustrator=new this.#e(r,e,this.#r)}async draw(t){if(!this.#t)return;let{element:e}=t.detail,s={clear:this.#t.clear.bind(this.#t),polygon:this.#t.polygon.bind(this.#t),image:this.#t.image.bind(this.#t),text:this.#t.text.bind(this.#t),group:this.#t.group.bind(this.#t)}[e.type];typeof s=="function"&&await s(e)}static subscriptions={[o.MODULES]:"register",[o.DRAW]:"draw"}};var l=class{#e=null;#t=null;#r;static inject={minstrel:"boardmeister/minstrel",herald:"boardmeister/herald"};inject(e){this.#r=e}async register(e){let{modules:r,canvas:s}=e.detail;if(!this.#e){let i=this.#r.minstrel.getResourceUrl(this,"module.js");this.#e=(await import(i)).default}this.#t=r.workspace=new this.#e(s,r)}draw(e){if(!this.#t)return;let{element:r}=e.detail,i={clear:this.#t.drawCanvas.bind(this.#t)}[r.type];typeof i=="function"&&i(r)}setOrigin(){this.#t?.setOrigin()}restoreOrigin(){this.#t?.restore()}calc(e){let r=e.detail.values,s=Object.keys(r);for(let i of s)r[i]=this.#t.calc(r[i])}static subscriptions={[a.CALC]:"calc",[n.MODULES]:"register",[n.DRAW]:[{method:"draw",priority:10},{method:"setOrigin",priority:-255},{method:"restoreOrigin",priority:255}]}},c=l,f=c;export{l as AntetypeWorkspace,f as default};
