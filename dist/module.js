var i=class{#canvas;#modules;#ctx;#translationSet=0;constructor(t,e){if(!t)throw new Error("[Antetype Workspace] Provided canvas is empty");this.#canvas=t,this.#modules=e,this.#ctx=this.#canvas.getContext("2d")}drawCanvas(){let t=this.#ctx;t.save(),t.fillStyle="#FFF";let{height:e,width:n}=this.#getSize();t.fillRect(0,0,n,e),t.restore()}setOrigin(){if(this.#translationSet++,this.#translationSet>1)return;let t=this.#ctx;t.save();let{height:e,width:n}=this.#getSize();t.translate((t.canvas.offsetWidth-n)/2,(t.canvas.offsetHeight-e)/2)}restore(){this.#translationSet--,this.#translationSet==0&&this.#ctx.restore()}calc(operation){if(typeof operation=="number")return operation;if(typeof operation!="string")return NaN;let convertUnitToNumber=(t,e=2)=>Number(t.slice(0,t.length-e)),{height,width}=this.#getSize(),unitsTranslator={px:t=>convertUnitToNumber(t),"w%":t=>convertUnitToNumber(t)/100*width,"h%":t=>convertUnitToNumber(t)/100*height,vh:t=>{let e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return convertUnitToNumber(t)/100*e},vw:t=>{let e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return convertUnitToNumber(t)/100*e},default:t=>t},calculation="";operation.split(" ").forEach(t=>{t=t.trim();let e=t[t.length-1],n=t[t.length-2];calculation+=String((unitsTranslator[n+e]||unitsTranslator.default)(t))});let result=eval(calculation.replace(/[^-()\d/*+.]/g,""));return result??NaN}#getSystem(){return this.#modules.system}#getSettings(){let t=this.#ctx.canvas.offsetHeight;return this.#getSystem().setting.get("workspace")??{height:t,width:t*.707070707}}#getSize(){let t=this.#getSettings().width/this.#getSettings().height,e=this.#ctx.canvas.offsetHeight,n=e*t;return n>this.#ctx.canvas.offsetWidth&&(n=this.#ctx.canvas.offsetWidth,e=n*(this.#getSettings().height/this.#getSettings().width)),{width:n,height:e}}};export{i as default};
